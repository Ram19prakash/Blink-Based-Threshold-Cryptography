{% extends "base.html" %}
{% block content %}
<div class="container">
    <h2>User Access Control</h2>
    
    <div class="encryption-info">
        <h3>Encrypted Document: <span id="encryptedFileName">{{ original_filename }}</span></h3>
        <p>Configuration: <span id="userConfig">{{ n_users }} users, {{ threshold }} required for access</span></p>
    </div>
    
    <div id="accessProgress" style="display: none; background: linear-gradient(135deg, #e3f2fd, #bbdefb); padding: 15px; border-radius: 15px; margin: 20px 0; border-left: 4px solid #2196f3;">
        <h4 id="progressTitle">Access Progress</h4>
        <div style="width: 100%; height: 20px; background: #e9ecef; border-radius: 10px; overflow: hidden; margin: 10px 0; box-shadow: inset 0 2px 4px rgba(0,0,0,0.1);">
            <div id="progressBar" style="height: 100%; background: linear-gradient(135deg, #27ae60, #2ecc71); width: 0%; transition: width 0.5s ease; border-radius: 10px;"></div>
        </div>
        <div id="progressDetails" style="color: #666; font-size: 14px;"></div>
        <div id="grantedUsers" style="margin-top: 10px; font-size: 12px; color: #28a745;"></div>
    </div>
    
    <div class="user-container" id="userContainer"></div>
    
    <div id="notificationArea" style="margin: 20px 0;"></div>
    <div id="alarmSection"></div>
    <div id="pendingRequests"></div>
</div>

<script>
    // Store configuration in data attributes to avoid template conflicts
    document.addEventListener('DOMContentLoaded', function() {
        const container = document.getElementById('userContainer');
        container.setAttribute('data-n-users', '{{ n_users }}');
        container.setAttribute('data-threshold', '{{ threshold }}');
    });
</script>
<script src="{{ url_for('static', filename='js/users.js') }}"></script>
{% endblock %}